"use strict";var _createClass=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DBHelper=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"fetchRestaurants",value:function(){return fetch(a.DATABASE_URL).then(function(e){return e.json()}).catch(function(e){return console.error("Request failed. Returned status of "+e)})}},{key:"fetchRestaurantById",value:function(t){return fetch(a.DATABASE_URL).then(function(e){return e.json()}).then(function(e){return e.restaurants[t-1]}).catch(function(e){return console.error("Restaurant does not exist: "+e)})}},{key:"fetchRestaurantByCuisine",value:function(t){return a.fetchRestaurants().then(function(e){return e.restaurants.filter(function(e){return e.cuisine_type==t})}).catch(function(e){return console.error(e)})}},{key:"fetchRestaurantByNeighborhood",value:function(t){return a.fetchRestaurants().then(function(e){return e.restaurants.filter(function(e){return e.neighborhood==t})}).catch(function(e){return console.error(e)})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(n,r){return a.fetchRestaurants().then(function(e){var t=e.restaurants;return"all"!==n&&(t=e.restaurants.filter(function(e){return e.cuisine_type==n})),"all"!==r&&(t=e.restaurants.filter(function(e){return e.neighborhood==r})),t}).catch(function(e){return console.error(e)})}},{key:"fetchNeighborhoods",value:function(){return a.fetchRestaurants().then(function(e){var n=e.restaurants.map(function(e){return e.neighborhood});return n.filter(function(e,t){return n.indexOf(e)==t})}).catch(function(e){return console.error(e)})}},{key:"fetchCuisines",value:function(){return a.fetchRestaurants().then(function(e){var n=e.restaurants.map(function(e){return e.cuisine_type});return n.filter(function(e,t){return n.indexOf(e)==t})}).catch(function(e){return console.error(e)})}},{key:"urlForRestaurant",value:function(e){return"restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"assets/img/jpg/"+e.photograph}},{key:"imageWebpUrlForRestaurant",value:function(e){return"assets/img/webp/"+e.photograph}},{key:"mapMarkerForRestaurant",value:function(e,t){return new google.maps.Marker({position:e.latlng,title:e.name,url:a.urlForRestaurant(e),map:t,animation:google.maps.Animation.DROP})}},{key:"switchLoaderToMap",value:function(){document.getElementById("map").classList.contains("hidden")&&(document.getElementById("map").classList.remove("hidden"),document.getElementById("map-loader").classList.add("hidden"))}},{key:"sendMessage",value:function(r){return new Promise(function(t,n){var e=new MessageChannel;e.port1.onmessage=function(e){e.data.error?n(e.data.error):t(e.data)},navigator.serviceWorker.controller.postMessage(r,[e.port2])})}},{key:"DATABASE_URL",get:function(){return"data/restaurants.json"}}]),a}();