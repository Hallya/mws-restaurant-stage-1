class DBHelper {

  static get DATABASE_URL() {
    const path = window.location.hostname === 'hallya.github.io' ? 'data/restaurants.json' : 'http://localhost:1337/restaurants';
    // const path = 'http://localhost:1337/restaurants';
    return path;
  }

  /**
   * Fetch all restaurants.
   */
  static fetchRestaurants() {
    return fetch(DBHelper.DATABASE_URL).then(response => response.json()).catch(error => console.error(`Request failed. Returned status of ${error}`));
  }

  /**
   * Fetch a restaurant by its ID.
   */
  static fetchRestaurantById(id) {
    // fetch all restaurants with proper error handling.
    return fetch(DBHelper.DATABASE_URL).then(response => response.json()).then(data => {
      return data.restaurants[id - 1];
    }).catch(error => console.error(`Restaurant does not exist: ${error}`));
  }

  /**
   * Fetch restaurants by a cuisine type with proper error handling.
   */
  static fetchRestaurantByCuisine(cuisine) {
    // Fetch all restaurants  with proper error handling
    return DBHelper.fetchRestaurants().then(restaurants => restaurants.restaurants.filter(r => r.cuisine_type == cuisine)).catch(error => console.error(error));
  }

  /**
   * Fetch restaurants by a neighborhood with proper error handling.
   */
  static fetchRestaurantByNeighborhood(neighborhood) {
    // Fetch all restaurants
    return DBHelper.fetchRestaurants().then(restaurants => restaurants.restaurants.filter(r => r.neighborhood == neighborhood)).catch(error => console.error(error));
  }

  /**
   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.
   */
  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood) {
    // Fetch all restaurants
    return DBHelper.fetchRestaurants().then(restaurants => {
      let results = restaurants.restaurants;
      if (cuisine !== 'all') {
        results = restaurants.restaurants.filter(r => r.cuisine_type == cuisine);
      }
      if (neighborhood !== 'all') {
        results = restaurants.restaurants.filter(r => r.neighborhood == neighborhood);
      }
      return results;
    }).catch(error => console.error(error));
  }

  /**
   * Fetch all neighborhoods with proper error handling.
   */
  static fetchNeighborhoods() {
    // Fetch all restaurants
    return DBHelper.fetchRestaurants().then(restaurants => {
      // Get all neighborhoods from all restaurants
      const neighborhoods = restaurants.restaurants.map(restaurant => restaurant.neighborhood);
      // Remove duplicates from neighborhoods
      const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) == i);
      return uniqueNeighborhoods;
    }).catch(error => console.error(error));
  }

  /**
   * Fetch all cuisines with proper error handling.
   */
  static fetchCuisines() {
    // Fetch all restaurants
    return DBHelper.fetchRestaurants().then(restaurants => {
      // Get all cuisines from all restaurants
      const cuisines = restaurants.restaurants.map(restaurant => restaurant.cuisine_type);
      // Remove duplicates from cuisines
      const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) == i);
      return uniqueCuisines;
    }).catch(error => console.error(error));
  }

  /**
   * Restaurant page URL.
   */
  static urlForRestaurant(restaurant) {
    return `restaurant.html?id=${restaurant.id}`;
  }

  /**
   * Restaurant image URL.
   */
  static imageUrlForRestaurant(restaurant) {
    return `assets/img/${restaurant.photograph}`;
  }

  /**q
   * Map marker for a restaurant.
   */
  static mapMarkerForRestaurant(restaurant, map) {
    const marker = new google.maps.Marker({
      position: restaurant.latlng,
      title: restaurant.name,
      url: DBHelper.urlForRestaurant(restaurant),
      map: map,
      animation: google.maps.Animation.DROP });
    return marker;
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIl0sIm5hbWVzIjpbIkRCSGVscGVyIiwiREFUQUJBU0VfVVJMIiwicGF0aCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJmZXRjaFJlc3RhdXJhbnRzIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiaWQiLCJkYXRhIiwicmVzdGF1cmFudHMiLCJmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUiLCJjdWlzaW5lIiwiZmlsdGVyIiwiciIsImN1aXNpbmVfdHlwZSIsImZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kIiwibmVpZ2hib3Job29kIiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzdWx0cyIsImZldGNoTmVpZ2hib3Job29kcyIsIm5laWdoYm9yaG9vZHMiLCJtYXAiLCJyZXN0YXVyYW50IiwidW5pcXVlTmVpZ2hib3Job29kcyIsInYiLCJpIiwiaW5kZXhPZiIsImZldGNoQ3Vpc2luZXMiLCJjdWlzaW5lcyIsInVuaXF1ZUN1aXNpbmVzIiwidXJsRm9yUmVzdGF1cmFudCIsImltYWdlVXJsRm9yUmVzdGF1cmFudCIsInBob3RvZ3JhcGgiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50IiwibWFya2VyIiwiZ29vZ2xlIiwibWFwcyIsIk1hcmtlciIsInBvc2l0aW9uIiwibGF0bG5nIiwidGl0bGUiLCJuYW1lIiwidXJsIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsUUFBTixDQUFlOztBQUViLGFBQVdDLFlBQVgsR0FBMEI7QUFDeEIsVUFBTUMsT0FBT0MsT0FBT0MsUUFBUCxDQUFnQkMsUUFBaEIsS0FBNkIsa0JBQTdCLEdBQWtELHVCQUFsRCxHQUE0RSxtQ0FBekY7QUFDQTtBQUNBLFdBQU9ILElBQVA7QUFDRDs7QUFFRDs7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V25CLFlBQVlBLFdBQVosQ0FBd0JZLEdBQXhCLENBQTRCQyxjQUFjQSxXQUFXUixZQUFyRCxDQUFqQjtBQUNBO0FBQ0EsWUFBTWUsaUJBQWlCRCxTQUFTaEIsTUFBVCxDQUFnQixDQUFDWSxDQUFELEVBQUlDLENBQUosS0FBVUcsU0FBU0YsT0FBVCxDQUFpQkYsQ0FBakIsS0FBdUJDLENBQWpELENBQXZCO0FBQ0EsYUFBT0ksY0FBUDtBQUNELEtBUEksRUFPRjFCLEtBUEUsQ0FPSUMsU0FBU0MsUUFBUUQsS0FBUixDQUFjQSxLQUFkLENBUGIsQ0FBUDtBQVFEOztBQUVEOzs7QUFHQSxTQUFPMEIsZ0JBQVAsQ0FBd0JSLFVBQXhCLEVBQW9DO0FBQ2xDLFdBQVMsc0JBQXFCQSxXQUFXZixFQUFHLEVBQTVDO0FBQ0Q7O0FBRUQ7OztBQUdBLFNBQU93QixxQkFBUCxDQUE2QlQsVUFBN0IsRUFBeUM7QUFDdkMsV0FBUyxjQUFhQSxXQUFXVSxVQUFXLEVBQTVDO0FBQ0Q7O0FBRUQ7OztBQUdBLFNBQU9DLHNCQUFQLENBQThCWCxVQUE5QixFQUEwQ0QsR0FBMUMsRUFBK0M7QUFDN0MsVUFBTWEsU0FBUyxJQUFJQyxPQUFPQyxJQUFQLENBQVlDLE1BQWhCLENBQXVCO0FBQ3BDQyxnQkFBVWhCLFdBQVdpQixNQURlO0FBRXBDQyxhQUFPbEIsV0FBV21CLElBRmtCO0FBR3BDQyxXQUFLbEQsU0FBU3NDLGdCQUFULENBQTBCUixVQUExQixDQUgrQjtBQUlwQ0QsV0FBS0EsR0FKK0I7QUFLcENzQixpQkFBV1IsT0FBT0MsSUFBUCxDQUFZUSxTQUFaLENBQXNCQyxJQUxHLEVBQXZCLENBQWY7QUFPQSxXQUFPWCxNQUFQO0FBQ0Q7QUE5SFkiLCJmaWxlIjoiZGJoZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBEQkhlbHBlciB7XHJcblxyXG4gIHN0YXRpYyBnZXQgREFUQUJBU0VfVVJMKCkge1xyXG4gICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2hhbGx5YS5naXRodWIuaW8nID8gJ2RhdGEvcmVzdGF1cmFudHMuanNvbicgOiAnaHR0cDovL2xvY2FsaG9zdDoxMzM3L3Jlc3RhdXJhbnRzJztcclxuICAgIC8vIGNvbnN0IHBhdGggPSAnaHR0cDovL2xvY2FsaG9zdDoxMzM3L3Jlc3RhdXJhbnRzJztcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKERCSGVscGVyLkRBVEFCQVNFX1VSTClcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke2Vycm9yfWApKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZldGNoIGEgcmVzdGF1cmFudCBieSBpdHMgSUQuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5SWQoaWQpIHtcclxuICAgIC8vIGZldGNoIGFsbCByZXN0YXVyYW50cyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgIHJldHVybiBmZXRjaChEQkhlbHBlci5EQVRBQkFTRV9VUkwpXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEucmVzdGF1cmFudHNbaWQgLSAxXTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYFJlc3RhdXJhbnQgZG9lcyBub3QgZXhpc3Q6ICR7ZXJyb3J9YCkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIHR5cGUgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZShjdWlzaW5lKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHMgIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpXHJcbiAgICAgIC50aGVuKHJlc3RhdXJhbnRzID0+IHJlc3RhdXJhbnRzLnJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09IGN1aXNpbmUpKVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXHJcbiAgICovXHJcbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudEJ5TmVpZ2hib3Job29kKG5laWdoYm9yaG9vZCkge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpXHJcbiAgICAgIC50aGVuKHJlc3RhdXJhbnRzID0+IHJlc3RhdXJhbnRzLnJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIubmVpZ2hib3Job29kID09IG5laWdoYm9yaG9vZCkpXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgYW5kIGEgbmVpZ2hib3Job29kIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kKSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcclxuICAgIHJldHVybiBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKClcclxuICAgICAgLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHRzID0gcmVzdGF1cmFudHMucmVzdGF1cmFudHM7XHJcbiAgICAgICAgaWYgKGN1aXNpbmUgIT09ICdhbGwnKSB7XHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdGF1cmFudHMucmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5jdWlzaW5lX3R5cGUgPT0gY3Vpc2luZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT09ICdhbGwnKSB7XHJcbiAgICAgICAgICByZXN1bHRzID0gcmVzdGF1cmFudHMucmVzdGF1cmFudHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT0gbmVpZ2hib3Job29kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cclxuICAgKi9cclxuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKCkge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpXHJcbiAgICAgIC50aGVuKHJlc3RhdXJhbnRzID0+IHtcclxuICAgICAgICAvLyBHZXQgYWxsIG5laWdoYm9yaG9vZHMgZnJvbSBhbGwgcmVzdGF1cmFudHNcclxuICAgICAgICBjb25zdCBuZWlnaGJvcmhvb2RzID0gcmVzdGF1cmFudHMucmVzdGF1cmFudHMubWFwKHJlc3RhdXJhbnQgPT4gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2QpO1xyXG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZU5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzLmZpbHRlcigodiwgaSkgPT4gbmVpZ2hib3Job29kcy5pbmRleE9mKHYpID09IGkpO1xyXG4gICAgICAgIHJldHVybiB1bmlxdWVOZWlnaGJvcmhvb2RzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmV0Y2ggYWxsIGN1aXNpbmVzIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nLlxyXG4gICAqL1xyXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKCkge1xyXG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXHJcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpXHJcbiAgICAgIC50aGVuKHJlc3RhdXJhbnRzID0+IHtcclxuICAgICAgICAvLyBHZXQgYWxsIGN1aXNpbmVzIGZyb20gYWxsIHJlc3RhdXJhbnRzXHJcbiAgICAgICAgY29uc3QgY3Vpc2luZXMgPSByZXN0YXVyYW50cy5yZXN0YXVyYW50cy5tYXAocmVzdGF1cmFudCA9PiByZXN0YXVyYW50LmN1aXNpbmVfdHlwZSk7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBjdWlzaW5lc1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUN1aXNpbmVzID0gY3Vpc2luZXMuZmlsdGVyKCh2LCBpKSA9PiBjdWlzaW5lcy5pbmRleE9mKHYpID09IGkpO1xyXG4gICAgICAgIHJldHVybiB1bmlxdWVDdWlzaW5lcztcclxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBwYWdlIFVSTC5cclxuICAgKi9cclxuICBzdGF0aWMgdXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGByZXN0YXVyYW50Lmh0bWw/aWQ9JHtyZXN0YXVyYW50LmlkfWApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzdGF1cmFudCBpbWFnZSBVUkwuXHJcbiAgICovXHJcbiAgc3RhdGljIGltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSB7XHJcbiAgICByZXR1cm4gKGBhc3NldHMvaW1nLyR7cmVzdGF1cmFudC5waG90b2dyYXBofWApO1xyXG4gIH1cclxuXHJcbiAgLyoqcVxyXG4gICAqIE1hcCBtYXJrZXIgZm9yIGEgcmVzdGF1cmFudC5cclxuICAgKi9cclxuICBzdGF0aWMgbWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBtYXApIHtcclxuICAgIGNvbnN0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXHJcbiAgICAgIHRpdGxlOiByZXN0YXVyYW50Lm5hbWUsXHJcbiAgICAgIHVybDogREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSxcclxuICAgICAgbWFwOiBtYXAsXHJcbiAgICAgIGFuaW1hdGlvbjogZ29vZ2xlLm1hcHMuQW5pbWF0aW9uLkRST1B9XHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1hcmtlcjtcclxuICB9XHJcbn0iXX0=
